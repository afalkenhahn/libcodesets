# Make file for codesets.library

TARGET = codesets.library

# Compiler
C_COMPILER = sc

C_OPTIMIZE = OPTIMIZE OPTIMIZERINLINELOCAL OPTIMIZERSCHEDULER OPTIMIZERTIME\
OPTIMIZERCOMPLEXITY=8 OPTIMIZERDEPTH=5

C_COMPILER_OPTS = PARAMETERS=REGISTERS NOSTACKCHECK STRINGMERGE NOCHECKABORT COMMENTNEST
INCLUDEDIR=/include\
$(C_OPTIMIZE)

# Assembler
ASSEMBLER = a68k
ASSEMBLER_OPTS = -iainc:

# Linker
LINKER = slink
LINKER_OPTS = NOICONS SC SD ND

# Objects
OBJECTS = libent.o libinit.o endcode.o init.o utils.o base64.o convertUTF.o codesets.o

# Libs
LIBS = LIB:sc.lib LIB:amiga.lib LIB:debug.lib

# Built module
$(TARGET): $(OBJECTS) $(LIBS)
         $(LINKER) <with <
FROM $(OBJECTS) TO $(TARGET) LIB $(LIBS) $(LINKER_OPTS)
<
        avail flush

# Rules
.c.o:
        $(C_COMPILER) $*.c $(C_COMPILER_OPTS)

.asm.o:
        $(ASSEMBLER) $(ASSEMBLER_OPTS) $*.asm

# Dependences
libent.o:       libent.asm codesets.library_rev.i
libinit.o:      libinit.c lib.h codesets.library_rev.h base.h macros.h lib_protos.h
endcode.o:      endcode.asm
init.o:         init.c lib.h base.h macros.h lib_protos.h
utils.o:        utils.c lib.h base.h macros.h lib_protos.h
base64.o:       base64.c lib.h base.h macros.h lib_protos.h
convertUTF.o:   convertUTF.c lib.h ConvertUTF.h base.h macros.h lib_protos.h
codesets.o:     codesets.c lib.h codesets_table.h ConvertUTF.h base.h macros.h lib_protos.h
